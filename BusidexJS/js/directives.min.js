angular.module("Busidex.directives",[]).directive("appVersion",["version",function(n){return function(t,i){i.text(n)}}]).directive("login",function(){return{restrict:"E",controller:"LoginPartialViewCtrl",replace:!0,transclude:!0,template:'<li><a ng-model="LoginModel" href="{{LoginModel.LoginRoute}}">{{LoginModel.LoginText}}<\/a><\/li>'}}).directive("homeLink",function(){return{restrict:"E",controller:"LoginPartialViewCtrl",replace:!0,transclude:!0,template:'<a ng-model="LoginModel" ng-href="{{LoginModel.HomeLink}}" ng-click="$parent.SetCurrentMenuItem(\'Home\')">Home<\/a>'}}).directive("fileUpload",function(){return{controller:"AddCardCtrl",link:function(n,t,i){t.unbind("change").bind("change",function(t){var u,r;for(n.IsBound=null,u=t.target.files,r=0;r<u.length;r++)n.$emit("fileSelected",{file:u[r],idx:i.idx})})}}}).directive("validEmailC",function(){return{require:"ngModel",link:function(n,t,i,r){r.$parsers.unshift(function(t){var i=t==n.userDataForm.Email.$viewValue;return r.$setValidity("isMatch",i),t})}}}).directive("validPasswordC",function(){return{require:"ngModel",link:function(n,t,i,r){r.$parsers.unshift(function(t){var i=n.userDataForm.ConfirmPassword.$viewValue==n.userDataForm.Password.$viewValue;return r.$setValidity("isMatch",i),t})}}}).directive("validForm",function(){return{require:"ngModel",link:function(n,t,i,r){r.$parsers.unshift(function(t){var u=0,i=0,f=0;r.$name=="Email"&&(n.EmailOkToUse="");var e={},o={},s={};return n.userDataForm.DisplayName!==undefined&&(e={DisplayNameRequired:{Error:(n.userDataForm.DisplayName.$viewValue===undefined||n.userDataForm.DisplayName.$viewValue.length===0)&&++f==1,Message:"required"},ErrorCount:f}),n.userDataForm.Password!==undefined&&(o={PasswordRequired:{Error:(n.userDataForm.Password.$viewValue===undefined||n.userDataForm.Password.$viewValue.length===0)&&++u==1,Message:"password required"},PasswordLength:{Error:n.userDataForm.Password.$viewValue!==undefined&&(n.userDataForm.Password.$viewValue.length<8||n.userDataForm.Password.$viewValue.length>20)&&++u==1,Message:"password must be between 8 and 20 characters"},ErrorCount:u}),n.userDataForm.Email!==undefined&&(s={EmailRequired:{Error:(n.userDataForm.Email.$viewValue===undefined||n.userDataForm.Email.$viewValue.length===0)&&++i==1,Message:"required"},ValidEmail:{Error:n.userDataForm.Email.$viewValue!==undefined&&n.userDataForm.Email.$viewValue.indexOf("@")<0&&++i==1,Message:"invalid email"},EmailMatch:{Error:n.userDataForm.ConfirmEmail!==undefined&&n.userDataForm.ConfirmEmail.$viewValue!==n.userDataForm.Email.$viewValue&&++i==1,Message:"emails do not match"},ConfirmEmailRequired:{Error:n.userDataForm.ConfirmEmail!==undefined&&(n.userDataForm.ConfirmEmail.$viewValue===undefined||n.userDataForm.ConfirmEmail.$viewValue.length===0)&&++i==1,Message:"Please confirm your email"},ErrorCount:i}),n.PasswordMessages=o,n.EmailMessages=s,n.DisplayNameMessages=e,t})}}}).directive("humanQuestion",function(){return{require:"ngModel",link:function(n,t,i,r){r.$parsers.unshift(function(n){var t=n==7;return r.$setValidity("isCorrect",t),n})}}}).directive("ngEnter",function(){return function(n,t,i){t.bind("keydown keypress",function(t){t.which===13&&(n.$apply(function(){n.$eval(i.ngEnter)}),t.preventDefault())})}}).directive("adminMenu",function(){return{require:"ngModel",controller:"AdminMenuCtrl",restrict:"E",template:'<ul id="adminMenu"><li ng-repeat="item in MenuItems"><a class="btn btn-link" ng-href="{{item.Link}}">{{item.Name}}<\/a><\/li><\/ul>',replace:!0,transclude:!0}}).directive("sharedcardicon",function(){return{require:"ngModel",controller:"SharedCardCtrl",restrict:"E",template:'<li ng-model="HasSharedCards" ng-show="$parent.HasSharedCards"><a id="notificationTrigger" href="" data-target="#notificationPopup" role="button" data-toggle="modal"><img id="NotificationIcon" src="https://www.busidex.com/img/notification1.gif" alt="Someone sent you some cards!" title="Someone sent you some cards!" /><\/a><\/li>',replace:!0,transclude:!0}}).directive("notes",["Notes",function(n){return{scope:{card:"="},link:function(t){t.card.EditingNotes=!1;t.NotesCache=t.card.Notes;t.EditNotes=function(){t.card.EditingNotes=!0};t.DiscardNotes=function(){t.card.EditingNotes=!1;t.card.Notes=t.NotesCache};t.SaveNotes=function(i,r){n.update({id:i,notes:escape(r)},function(){t.card.EditingNotes=!1;t.NotesCache=t.card.Notes},function(){})}},restrict:"AE",template:'<div><textarea class="Notes" ucid="{{card.UserCardId}}" data="{{card.Notes}}" cardid="{{card.CardId}}" ng-focus="EditNotes()" ng-model="card.Notes" name="Notes"><\/textarea><i ng-show="card.EditingNotes" ng-click="DiscardNotes()" class="icon-remove" style="zoom:1.5;float:right;width:15px;margin-top:-5px;"><\/i><i ng-show="card.EditingNotes" ng-click="SaveNotes(card.UserCardId, card.Notes)" class="icon-check" style="zoom:1.5;float:right;width:15px;;margin-top:-5px;"><\/i><\/div>',replace:!0}}]).directive("fileModel",["$parse",function(n){return{restrict:"A",link:function(t,i,r){var u=n(r.fileModel),f=u.assign;i.bind("change",function(){t.$apply(function(){f(t,i[0].files[0])})})}}}]).directive("popoverTemplatePopup",["$templateCache","$compile",function(n,t){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"card/popover-template.html",link:function(i,r){var u=angular.fromJson(i.content),e=n.get(u.templateUrl),f=i,o=document.getElementsByClassName("ng-scope");angular.forEach(o,function(n){var t=angular.element(n).scope();t.$id==u.scopeId&&(f=t)});r.find("div.popover-content").html(t(e)(f))}}}]).directive("popoverTemplate",["$tooltip",function(n){var t=n("popoverTemplate","popover","click");return t.compile=function(){return{pre:function(n,t,i){i.$set("popoverTemplate",{templateUrl:i.popoverTemplate,scopeId:n.$id})},post:t.link}},t}]).directive("mobileicon",function(){return{require:"ngModel",controller:"MyBusidexCtrl",restrict:"E",template:'<img ng-click="toggleMobile(card)" ng-src="{{card.MobileView && \'../../img/mobile2_32x32.png\' || \'../../img/mobile2_32x32_off.png\'}}" title="Mobile View" alt="" />',replace:!0,transclude:!0}}).directive("whenScrolled",function(n){return function(t,i){var r=i[0].nextElementSibling;angular.element(n).bind("scroll",function(){var u=r.scrollTop,f=r.offsetHeight,e=u+f,o=n.document.body.scrollTop;e+200>=o&&t.$apply(i[0].click())})}}).directive("fileModel",["$parse",function(n){return{restrict:"A",scope:{method:"&cb"},link:function(t,i,r){var u=n(r.fileModel),f=u.assign;i.bind("change",function(){t.$apply(function(){f(t,i[0].files[0]);var n=t.method();n!==null&&n!==undefined&&n(i[0].files[0])})})}}}]).directive("passwordStrength",function(){return{restrict:"A",require:"ngModel",link:function(n,t,i,r){var f=t.children(),u=Array.prototype.slice.call(f.children()),e=u.slice(-1)[0],o=u.slice(-2),s=u.slice(-3),h=u.slice(-4);t.after(f);t.bind("keyup",function(){var n={positive:{},negative:{}},t={positive:{},negative:{}},f,i=0;angular.forEach(u,function(n){n.style.backgroundColor="#ebeef1"});r.$viewValue&&(n.positive.lower=r.$viewValue.match(/[a-z]/g),n.positive.upper=r.$viewValue.match(/[A-Z]/g),n.positive.numbers=r.$viewValue.match(/\d/g),n.positive.symbols=r.$viewValue.match(/[$-/:-?{-~!^_`\[\]]/g),n.positive.middleNumber=r.$viewValue.slice(1,-1).match(/\d/g),n.positive.middleSymbol=r.$viewValue.slice(1,-1).match(/[$-/:-?{-~!^_`\[\]]/g),t.positive.lower=n.positive.lower?n.positive.lower.length:0,t.positive.upper=n.positive.upper?n.positive.upper.length:0,t.positive.numbers=n.positive.numbers?n.positive.numbers.length:0,t.positive.symbols=n.positive.symbols?n.positive.symbols.length:0,t.positive.numChars=r.$viewValue.length,f+=t.positive.numChars>=8?1:0,t.positive.requirements=f>=3?f:0,t.positive.middleNumber=n.positive.middleNumber?n.positive.middleNumber.length:0,t.positive.middleSymbol=n.positive.middleSymbol?n.positive.middleSymbol.length:0,n.negative.consecLower=r.$viewValue.match(/(?=([a-z]{2}))/g),n.negative.consecUpper=r.$viewValue.match(/(?=([A-Z]{2}))/g),n.negative.consecNumbers=r.$viewValue.match(/(?=(\d{2}))/g),n.negative.onlyNumbers=r.$viewValue.match(/^[0-9]*$/g),n.negative.onlyLetters=r.$viewValue.match(/^([a-z]|[A-Z])*$/g),t.negative.consecLower=n.negative.consecLower?n.negative.consecLower.length:0,t.negative.consecUpper=n.negative.consecUpper?n.negative.consecUpper.length:0,t.negative.consecNumbers=n.negative.consecNumbers?n.negative.consecNumbers.length:0,i+=t.positive.numChars*4,t.positive.upper&&(i+=(t.positive.numChars-t.positive.upper)*2),t.positive.lower&&(i+=(t.positive.numChars-t.positive.lower)*2),(t.positive.upper||t.positive.lower)&&(i+=t.positive.numbers*4),i+=t.positive.symbols*6,i+=(t.positive.middleSymbol+t.positive.middleNumber)*2,i+=t.positive.requirements*2,i-=t.negative.consecLower*2,i-=t.negative.consecUpper*2,i-=t.negative.consecNumbers*2,n.negative.onlyNumbers&&(i-=t.positive.numChars),n.negative.onlyLetters&&(i-=t.positive.numChars),i=Math.max(0,Math.min(100,Math.round(i))),i>85?angular.forEach(h,function(n){n.style.backgroundColor="#008cdd"}):i>65?angular.forEach(s,function(n){n.style.backgroundColor="#6ead09"}):i>30?angular.forEach(o,function(n){n.style.backgroundColor="#e09115"}):e.style.backgroundColor="#e01414")})},template:'<span class="password-strength-indicator"><span><\/span><span><\/span><span><\/span><span><\/span><\/span>'}});
//# sourceMappingURL=directives.min.js.map
