"use strict";angular.module("Busidex.directives",[]).directive("appVersion",["version",function(n){return function(t,i){i.text(n)}}]).directive("login",function(){return{restrict:"E",controller:LoginPartialViewCtrl,replace:!0,transclude:!0,template:'<li><a ng-model="$rootScope.LoginModel" href="{{LoginModel.LoginRoute}}">{{LoginModel.LoginText}}<\/a><\/li>'}}).directive("fileUpload",function(){return{controller:AddCardCtrl,link:function(n,t,i){t.unbind("change").bind("change",function(t){var u,r;for(n.IsBound=null,u=t.target.files,r=0;r<u.length;r++)n.$emit("fileSelected",{file:u[r],idx:i.idx})})}}}).directive("validEmailC",function(){return{require:"ngModel",link:function(n,t,i,r){r.$parsers.unshift(function(t){var i=t==n.userDataForm.Email.$viewValue;return r.$setValidity("isMatch",i),t})}}}).directive("validPasswordC",function(){return{require:"ngModel",link:function(n,t,i,r){r.$parsers.unshift(function(t){var i=t==n.userDataForm.Password.$viewValue;return r.$setValidity("isMatch",i),t})}}}).directive("humanQuestion",function(){return{require:"ngModel",link:function(n,t,i,r){r.$parsers.unshift(function(n){var t=n==7;r.$setValidity("noMatch",t)})}}}).directive("sharedcardicon",function(){return{require:"ngModel",controller:SharedCardCtrl,restrict:"E",template:'<li ng-model="HasSharedCards" ng-show="HasSharedCards"><a href="#notificationPopup" role="button" data-toggle="modal"><img id="NotificationIcon" src="https://busidex.com/img/notification1.gif" alt="Someone sent you some cards!" title="Someone sent you some cards!" /><\/a><\/li>',replace:!0,transclude:!0}}).directive("ngTap",function(){var n=!!("ontouchstart"in window);return function(t,i,r){if(n){var u=!1;i.bind("touchstart",function(){u=!0});i.bind("touchmove",function(){u=!1});i.bind("touchend",function(){u&&t.$apply(r.ngTap)})}else i.bind("click",function(){t.$apply(r.ngTap)})}}).directive("bnLazySrc",function(n,t){function r(n){function f(i,r){if(!n.is(":visible"))return!1;t===null&&(t=n.height());var u=n.offset().top,f=u+t;return u<=r&&u>=i||f<=r&&f>=i||u<=i&&f>=r}function e(){r=!0;u()}function o(n){i=n;r&&u()}function u(){n[0].src=i}var i=null,r=!1,t=null;return{isVisible:f,render:e,setSource:o}}function u(n,t,u){var f=new r(t);i.addImage(f);u.$observe("bnLazySrc",function(n){f.setSource(n)});n.$on("$destroy",function(){i.removeImage(f)})}var i=function(){function p(n){i.push(n);r||e();f||d()}function w(n){for(var t=0;t<i.length;t++)if(i[t]===n){i.splice(t,1);break}i.length||(c(),l())}function b(){if(!r){var n=o.height();n!==s&&(s=n,e())}}function k(){var t,n;console.log("Checking for visible images...");var r=[],f=[],o=u.height(),s=u.scrollTop(),e=s,h=e+o;for(n=0;n<i.length;n++)t=i[n],t.isVisible(e,h)?r.push(t):f.push(t);for(n=0;n<r.length;n++)r[n].render();i=f;c();i.length||l()}function c(){clearTimeout(r);r=null}function e(){r=setTimeout(k,v)}function d(){f=!0;u.on("resize.bnLazySrc",a);u.on("scroll.bnLazySrc",a);h=setInterval(b,y)}function l(){f=!1;u.off("resize.bnLazySrc");u.off("scroll.bnLazySrc");clearInterval(h)}function a(){r||e()}var i=[],r=null,v=100,u=$(n),o=t,s=o.height(),h=null,y=2e3,f=!1;return{addImage:p,removeImage:w}}();return{link:u,restrict:"A"}}).directive("whenScrolled",function(n){return function(t,i){var r=i[0].nextElementSibling;angular.element(n).bind("scroll",function(){var u=r.scrollTop,f=r.offsetHeight,e=u+f,o=n.document.body.scrollTop;e+200>=o&&t.$apply(i[0].click())})}});
/*
//# sourceMappingURL=directives.min.js.map
*/